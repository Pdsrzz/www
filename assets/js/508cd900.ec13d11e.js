"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[1239],{1306:(t,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var e=i(5893),r=i(1151);const s={title:"v1",author:"javerVip",tags:["Windows","Golang"]},o=void 0,l={id:"Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177/v1",title:"v1",description:"\u7b80\u4ecb",source:"@site/docs/Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177/v1.md",sourceDirName:"Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177",slug:"/Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177/v1",permalink:"/docs/Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177/v1",draft:!1,unlisted:!1,editUrl:"https://github.com/biuaxia/www/edit/v1/docs/Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177/v1.md",tags:[{label:"Windows",permalink:"/docs/tags/windows"},{label:"Golang",permalink:"/docs/tags/golang"}],version:"current",frontMatter:{title:"v1",author:"javerVip",tags:["Windows","Golang"]},sidebar:"tutorialSidebar",previous:{title:"Windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177",permalink:"/docs/category/windows\u7aef\u53e3\u6e05\u7406\u5de5\u5177"},next:{title:"3DM\u98ce\u7075\u6708\u5f71\u4fee\u6539\u5668\u5927\u5168\u5ba2\u6237\u7aef",permalink:"/docs/category/3dm\u98ce\u7075\u6708\u5f71\u4fee\u6539\u5668\u5927\u5168\u5ba2\u6237\u7aef"}},a={},p=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u6e90\u4ee3\u7801",id:"\u6e90\u4ee3\u7801",level:2}];function d(t){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...t.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,e.jsx)(n.admonition,{title:"\u4e0b\u8f7d\u94fe\u63a5\uff08\u7528\u65b0\u4e0d\u7528\u65e7\uff01\uff01\uff01\uff09",type:"success",children:(0,e.jsxs)(n.ul,{children:["\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:"https://b3logfile.com/file/2023/12/killPort-cbua8gB.zip",children:"killPort.zip"})," (2023\u5e7412\u67087\u65e510\u70b950\u5206)"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:"https://b3logfile.com/file/2023/12/killPort-xjDFrMx.zip",children:"killPort.zip"})," (2023\u5e7412\u67087\u65e510\u70b918\u5206)"]}),"\n"]})}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://b3logfile.com/file/2023/12/image-N62YVVJ.png",alt:"image.png"})}),"\n",(0,e.jsx)(n.h2,{id:"\u6e90\u4ee3\u7801",children:"\u6e90\u4ee3\u7801"}),"\n",(0,e.jsx)(n.p,{children:"\u7a0b\u5e8f\u4f7f\u7528 Golang \u7f16\u5199\uff0c\u6e90\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"flag"\n\t"fmt"\n\t"os"\n\t"os/exec"\n\t"strings"\n)\n\nfunc getPIDByPort(port string) string {\n\tcmd := exec.Command("netstat", "-a", "-n", "-o")\n\toutput, err := cmd.Output()\n\tif err != nil {\n\t\tfmt.Println("\u6267\u884c\u547d\u4ee4\u65f6\u53d1\u751f\u9519\u8bef:", err)\n\t\treturn ""\n\t}\n\n\tlines := strings.Split(string(output), "\\n")\n\tfor _, line := range lines {\n\t\tif strings.Contains(line, fmt.Sprintf(":%s", port)) {\n\t\t\tfields := strings.Fields(line)\n\t\t\tif len(fields) >= 5 {\n\t\t\t\treturn fields[len(fields)-1]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn ""\n}\n\nfunc killProcessByPID(pid string) {\n\tif pid == "" {\n\t\tfmt.Println("\u672a\u627e\u5230\u8fdb\u7a0b")\n\t\treturn\n\t}\n\n\tcmd := exec.Command("taskkill", "/F", "/PID", pid)\n\terr := cmd.Run()\n\tif err != nil {\n\t\tfmt.Println("\u65e0\u6cd5\u7ed3\u675f\u8fdb\u7a0b:", err)\n\t\treturn\n\t}\n\n\tfmt.Println("\u8fdb\u7a0b", pid, "\u5df2\u7ed3\u675f")\n}\n\nfunc printCustomUsage() {\n\tfmt.Println("\u6b22\u8fce\u4f7f\u7528\u7aef\u53e3\u6e05\u7406\u5de5\u5177\uff0c\u4f5c\u8005: biuaxia & ChatGPT")\n\tfmt.Println("Usage:")\n\tflag.PrintDefaults()\n}\n\nfunc main() {\n\tvar portsList []string\n\n\tvar port string\n\tflag.StringVar(&port, "port", "", "\u8981\u68c0\u67e5\u7684\u5355\u4e2a\u7aef\u53e3\u53f7")\n\n\tvar ports string\n\tflag.StringVar(&ports, "ports", "", "\u8981\u68c0\u67e5\u7684\u7aef\u53e3\u53f7\u5217\u8868\uff0c\u591a\u4e2a\u7aef\u53e3\u53f7\u4ee5\u9017\u53f7\u5206\u9694")\n\n\tflag.Usage = func() {\n\t\tif flag.NArg() == 0 {\n\t\t\tprintCustomUsage()\n\t\t} else {\n\t\t\tflag.PrintDefaults()\n\t\t}\n\t}\n\n\tflag.Parse()\n\n\tif port != "" {\n\t\tportsList = append(portsList, port)\n\t}\n\n\tif ports != "" {\n\t\tportsList = append(portsList, strings.Split(ports, ",")...)\n\t}\n\n\tif len(portsList) == 0 {\n\t\tprintCustomUsage()\n\t\tos.Exit(1)\n\t}\n\n\tfor _, p := range portsList {\n\t\tpid := getPIDByPort(p)\n\t\tif pid != "" {\n\t\t\tfmt.Println("\u7aef\u53e3", p, "\u88ab\u8fdb\u7a0b PID:", pid, "\u6240\u5360\u7528")\n\t\t\tkillProcessByPID(pid) // \u7ed3\u675f\u5bf9\u5e94 PID \u7684\u8fdb\u7a0b\n\t\t\tfmt.Println("\u6b63\u5728\u4e3a\u60a8\u6e05\u7406 PID:", pid, "...")\n\t\t\tpid = getPIDByPort(p)\n\t\t\tif pid != "" {\n\t\t\t\tfmt.Println("\u7aef\u53e3", p, "\u6e05\u7406\u5931\u8d25, \u5efa\u8bae\u901a\u8fc7\u4efb\u52a1\u7ba1\u7406\u5668\u67e5\u770b PID:", pid)\n\t\t\t} else {\n\t\t\t\tfmt.Println("\u7aef\u53e3", p, "\u5df2\u6e05\u7406")\n\t\t\t}\n\t\t} else {\n\t\t\tfmt.Println("\u7aef\u53e3", p, "\u672a\u88ab\u4f7f\u7528")\n\t\t}\n\t}\n}\n'})})]})}function c(t={}){const{wrapper:n}={...(0,r.a)(),...t.components};return n?(0,e.jsx)(n,{...t,children:(0,e.jsx)(d,{...t})}):d(t)}},1151:(t,n,i)=>{i.d(n,{Z:()=>l,a:()=>o});var e=i(7294);const r={},s=e.createContext(r);function o(t){const n=e.useContext(s);return e.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function l(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:o(t.components),e.createElement(s.Provider,{value:n},t.children)}}}]);